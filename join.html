<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Become a Student - LimiPlake</title>
    <script src="email.js"></script>
</head>
<body>
    <h2>Become a Student</h2>
    <form>
        <label for="username">Name:</label>
        <input type="text" id="name" name="name" required><br><br>

        <label for="email">Email:</label>
        <input type="email" id="email" name="email"><br><br>

        <label for="password">Choose a PIN code (4 digit):</label>
        <input type="text" id="pin" name="pin" required><br><br>

        <label for="parts">Choose LimiPlay (piano) or LimiMake (coding):</label>
        <select id="parts" required name="part">
            <option value="" disabled selected>Choose...</option>
            <option value="LimiPlay">LimiPlay</option>
            <option value="LimiMake">LimiMake</option>
            <option value="Both LimiPlay and LimiMake">Both LimiPlay and LimiMake</option>
        </select><br><br>

        <button id="becomeAStudent" type="submit">Click here to submit your info and become a student</button>
    </form>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            emailjs.init("oAbObyX_TdjrNh-4A"); // Your EmailJS user ID

            document.getElementById("becomeAStudent").addEventListener("click", function (event) {
                event.preventDefault();

                let params = {
                    to_email: "anhad@limiplake.com",
                    username: document.getElementById("name").value,
                    email: document.getElementById("email").value,
                    pin_code: document.getElementById("pin").value,
                    part: document.getElementById("parts").value
                };

                console.log("Params to be sent:", params);

                emailjs.send("service_1l2p3li5", "template_31oby7l", params)
                    .then(function (response) {
                        console.log("Email sent successfully:", response);
                        // Redirect after success
                        window.location.href = "thankyou.html";
                    }, function (error) {
                        console.error("Failed to send email:", error);
                        alert("Failed to send email: " + JSON.stringify(error));
                    });
            });
        });
    </script>
</body>
</html>
